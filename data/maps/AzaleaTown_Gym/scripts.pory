mapscripts AzaleaTown_Gym_MapScripts { }

script AzaleaTown_Gym_EventScript_GymGuide {
    lock
	faceplayer
    if (flag(FLAG_DEFEATED_AZALEA_GYM))
    {
        msgbox("Well done! That was a great clash\n"
               "of talented young TRAINERS.\p"
               "With people like you, the future of\n"
               "POKéMON is bright!")
    }
    else
    {
        msgbox("Yo, challenger!\p"
               "BUGSY's young, but his knowledge of\n"
               "BUG POKéMON is for real.\p"
               "It's going to be tough without my\n"
               "advice. Let's see…\p"
               "BUG POKéMON can't stand being too\n"
               "close to fire.\p"
               "FLYING-type moves are super-\n"
               "effective too.")
    }
	release
}

script AzaleaTown_Gym_EventScript_GymStatue {
    lockall
    if (flag(FLAG_BADGE02_GET))
    {
        msgbox("AZALEA TOWN POKéMON GYM\n"
               "LEADER: BUGSY\p"
               "WINNING TRAINERS:\n"
               "{PLAYER}")
    }
    else
    {
        msgbox("AZALEA TOWN POKéMON GYM")
    }
    releaseall
}

script AzaleaTown_Gym_EventScript_Benny {
	trainerbattle_single(TRAINER_BENNY, AzaleaTown_Gym_Text_BennyIntro, AzaleaTown_Gym_Text_BennyDefeat)
	msgbox(AzaleaTown_Gym_Text_BennyPostBattle, MSGBOX_DEFAULT)
	release
}

script AzaleaTown_Gym_EventScript_Al {
	trainerbattle_single(TRAINER_AL, AzaleaTown_Gym_Text_AlIntro, AzaleaTown_Gym_Text_AlDefeat)
	msgbox(AzaleaTown_Gym_Text_AlPostBattle, MSGBOX_DEFAULT)
	release
}

script AzaleaTown_Gym_EventScript_Josh {
	trainerbattle_single(TRAINER_JOSH, AzaleaTown_Gym_Text_JoshIntro, AzaleaTown_Gym_Text_JoshDefeat)
	msgbox(AzaleaTown_Gym_Text_JoshPostBattle, MSGBOX_DEFAULT)
	release
}

script AzaleaTown_Gym_EventScript_Amy {
	trainerbattle_double(TRAINER_AMY_AND_MAY, AzaleaTown_Gym_Text_AmyIntro, AzaleaTown_Gym_Text_AmyAndMayDefeat, AzaleaTown_Gym_Text_AmyNotEnoughMons)
	msgbox(AzaleaTown_Gym_Text_AmyPostBattle, MSGBOX_DEFAULT)
	release
}

script AzaleaTown_Gym_EventScript_May {
	trainerbattle_double(TRAINER_AMY_AND_MAY, AzaleaTown_Gym_Text_MayIntro, AzaleaTown_Gym_Text_AmyAndMayDefeat, AzaleaTown_Gym_Text_MayNotEnoughMons)
	msgbox(AzaleaTown_Gym_Text_MayPostBattle, MSGBOX_DEFAULT)
	release
}

raw `
AzaleaTown_Gym_EventScript_SetFlashRadius:: @ 81FC648
	goto_if_defeated TRAINER_BRAWLY_1, AzaleaTown_Gym_EventScript_SetLightsOn
	call AzaleaTown_Gym_EventScript_CountTrainersDefeated
	copyvar VAR_0x8001, VAR_0x8000
	compare VAR_0x8000, 0
	goto_if_eq AzaleaTown_Gym_EventScript_SetFlashRadius7
	compare VAR_0x8000, 1
	goto_if_eq AzaleaTown_Gym_EventScript_SetFlashRadius6
	compare VAR_0x8000, 2
	goto_if_eq AzaleaTown_Gym_EventScript_SetFlashRadius5
	compare VAR_0x8000, 3
	goto_if_eq AzaleaTown_Gym_EventScript_SetFlashRadius4
	compare VAR_0x8000, 4
	goto_if_eq AzaleaTown_Gym_EventScript_SetFlashRadius3
	compare VAR_0x8000, 5
	goto_if_eq AzaleaTown_Gym_EventScript_SetFlashRadius2
	goto AzaleaTown_Gym_EventScript_SetFlashRadius1

AzaleaTown_Gym_EventScript_SetLightsOn:: @ 81FC6A2
	setflashradius 0
	return

AzaleaTown_Gym_EventScript_SetFlashRadius1:: @ 81FC6A6
	setflashradius 1
	return

AzaleaTown_Gym_EventScript_SetFlashRadius2:: @ 81FC6AA
	setflashradius 2
	return

AzaleaTown_Gym_EventScript_SetFlashRadius3:: @ 81FC6AE
	setflashradius 3
	return

AzaleaTown_Gym_EventScript_SetFlashRadius4:: @ 81FC6B2
	setflashradius 4
	return

AzaleaTown_Gym_EventScript_SetFlashRadius5:: @ 81FC6B6
	setflashradius 5
	return

AzaleaTown_Gym_EventScript_SetFlashRadius6:: @ 81FC6BA
	setflashradius 6
	return

AzaleaTown_Gym_EventScript_SetFlashRadius7:: @ 81FC6BE
	setflashradius 7
	return

AzaleaTown_Gym_EventScript_BrightenRoom:: @ 81FC6C2
	call AzaleaTown_Gym_EventScript_CountTrainersDefeated
	nop1
	compare VAR_0x8000, VAR_0x8001
	goto_if_eq AzaleaTown_Gym_EventScript_NoLightChange
	copyvar VAR_0x8001, VAR_0x8000
	compare VAR_0x8000, 1
	goto_if_eq AzaleaTown_Gym_EventScript_AnimateFlash1Trainer
	compare VAR_0x8000, 2
	goto_if_eq AzaleaTown_Gym_EventScript_AnimateFlash2Trainers
	compare VAR_0x8000, 3
	goto_if_eq AzaleaTown_Gym_EventScript_AnimateFlash3Trainers
	compare VAR_0x8000, 4
	goto_if_eq AzaleaTown_Gym_EventScript_AnimateFlash4Trainers
	compare VAR_0x8000, 5
	goto_if_eq AzaleaTown_Gym_EventScript_AnimateFlash5Trainers
	compare VAR_0x8000, 6
	goto_if_eq AzaleaTown_Gym_EventScript_AnimateFlash6Trainers

AzaleaTown_Gym_EventScript_NoLightChange:: @ 81FC71A
	return

@ NOTE: A little confusingly, a larger animateflash param value is a smaller flash radius
AzaleaTown_Gym_EventScript_AnimateFlash1Trainer:: @ 81FC71B
	playse SE_MU_PACHI
	animateflash 6
	call AzaleaTown_Gym_EventScript_SetFlashRadius
	return

AzaleaTown_Gym_EventScript_AnimateFlash2Trainers:: @ 81FC726
	playse SE_MU_PACHI
	animateflash 5
	call AzaleaTown_Gym_EventScript_SetFlashRadius
	return

AzaleaTown_Gym_EventScript_AnimateFlash3Trainers:: @ 81FC731
	playse SE_MU_PACHI
	animateflash 4
	call AzaleaTown_Gym_EventScript_SetFlashRadius
	return

AzaleaTown_Gym_EventScript_AnimateFlash4Trainers:: @ 81FC73C
	playse SE_MU_PACHI
	animateflash 3
	call AzaleaTown_Gym_EventScript_SetFlashRadius
	return

AzaleaTown_Gym_EventScript_AnimateFlash5Trainers:: @ 81FC747
	playse SE_MU_PACHI
	animateflash 2
	call AzaleaTown_Gym_EventScript_SetFlashRadius
	return

AzaleaTown_Gym_EventScript_AnimateFlash6Trainers:: @ 81FC752
	playse SE_MU_PACHI
	animateflash 1
	call AzaleaTown_Gym_EventScript_SetFlashRadius
	return

AzaleaTown_Gym_EventScript_AnimateFlashFullBrightness:: @ 81FC75D
	playse SE_MU_PACHI
	animateflash 0
	call AzaleaTown_Gym_EventScript_SetFlashRadius
	return

AzaleaTown_Gym_EventScript_CountTrainersDefeated:: @ 81FC768
	setvar VAR_0x8000, 0
	goto_if_not_defeated TRAINER_TAKAO, AzaleaTown_Gym_EventScript_CheckJocelyn
	addvar VAR_0x8000, 1
AzaleaTown_Gym_EventScript_CheckJocelyn:: @ 81FC77B
	goto_if_not_defeated TRAINER_JOCELYN, AzaleaTown_Gym_EventScript_CheckLaura
	addvar VAR_0x8000, 1
AzaleaTown_Gym_EventScript_CheckLaura:: @ 81FC789
	goto_if_not_defeated TRAINER_LAURA, AzaleaTown_Gym_EventScript_CheckBrenden
	addvar VAR_0x8000, 1
AzaleaTown_Gym_EventScript_CheckBrenden:: @ 81FC797
	goto_if_not_defeated TRAINER_BRENDEN, AzaleaTown_Gym_EventScript_CheckCristian
	addvar VAR_0x8000, 1
AzaleaTown_Gym_EventScript_CheckCristian:: @ 81FC7A5
	goto_if_not_defeated TRAINER_CRISTIAN, AzaleaTown_Gym_EventScript_CheckLilith
	addvar VAR_0x8000, 1
AzaleaTown_Gym_EventScript_CheckLilith:: @ 81FC7B3
	goto_if_not_defeated TRAINER_LILITH, AzaleaTown_Gym_EventScript_StopCountingTrainers
	addvar VAR_0x8000, 1
AzaleaTown_Gym_EventScript_StopCountingTrainers:: @ 81FC7C1
	return

AzaleaTown_Gym_EventScript_Brawly:: @ 81FC7C2
	trainerbattle_single TRAINER_BRAWLY_1, AzaleaTown_Gym_Text_BrawlyIntro, AzaleaTown_Gym_Text_BrawlyDefeat, AzaleaTown_Gym_EventScript_BrawlyDefeated, NO_MUSIC
	specialvar VAR_RESULT, ShouldTryRematchBattle
	compare VAR_RESULT, TRUE
	goto_if_eq AzaleaTown_Gym_EventScript_BrawlyRematch
	goto_if_unset FLAG_RECEIVED_TM08, AzaleaTown_Gym_EventScript_GiveBulkUp2
	msgbox AzaleaTown_Gym_Text_BrawlyPostBattle, MSGBOX_DEFAULT
	release
	end

AzaleaTown_Gym_EventScript_BrawlyDefeated:: @ 81FC7F7
	call AzaleaTown_Gym_EventScript_AnimateFlashFullBrightness
	message AzaleaTown_Gym_Text_ReceivedKnuckleBadge
	waitmessage
	call Common_EventScript_PlayGymBadgeFanfare
	msgbox AzaleaTown_Gym_Text_KnuckleBadgeInfoTakeThis, MSGBOX_DEFAULT
	setflag FLAG_DEFEATED_AZALEA_GYM
	setflag FLAG_BADGE02_GET
	addvar VAR_SPROUT_TOWER_STATE, 1
	compare VAR_SPROUT_TOWER_STATE, 6
	call_if_eq Common_EventScript_ReadyPetalburgGymForBattle
	setvar VAR_0x8008, 2
	call Common_EventScript_SetGymTrainers
	call AzaleaTown_Gym_EventScript_GiveBulkUp
	closemessage
	delay 30
	playfanfare MUS_ME_TORE_EYE
	msgbox AzaleaTown_Gym_Text_RegisteredBrawly, MSGBOX_DEFAULT
	waitfanfare
	closemessage
	delay 30
	setflag FLAG_ENABLE_BRAWLY_MATCH_CALL
	setvar VAR_ROXANNE_CALL_STEP_COUNTER, 0
	setflag FLAG_CANCEL_BATTLE_ROOM_CHALLENGE
	release
	end

AzaleaTown_Gym_EventScript_GiveBulkUp:: @ 81FC855
	giveitem ITEM_TM08
	compare VAR_RESULT, 0
	goto_if_eq Common_EventScript_BagIsFull
	msgbox AzaleaTown_Gym_Text_ExplainBulkUp, MSGBOX_DEFAULT
	setflag FLAG_RECEIVED_TM08
	return

AzaleaTown_Gym_EventScript_GiveBulkUp2: @ 81FC878
	giveitem ITEM_TM08
	compare VAR_RESULT, 0
	goto_if_eq Common_EventScript_ShowBagIsFull
	msgbox AzaleaTown_Gym_Text_ExplainBulkUp, MSGBOX_DEFAULT
	setflag FLAG_RECEIVED_TM08
	release
	end

AzaleaTown_Gym_EventScript_BrawlyRematch:: @ 81FC89C
	trainerbattle_rematch_double TRAINER_BRAWLY_1, AzaleaTown_Gym_Text_BrawlyPreRematch, AzaleaTown_Gym_Text_BrawlyRematchDefeat, AzaleaTown_Gym_Text_BrawlyRematchNeedTwoMons
	msgbox AzaleaTown_Gym_Text_BrawlyPostRematch, MSGBOX_AUTOCLOSE
	end

AzaleaTown_Gym_EventScript_Takao:: @ 81FC8B7
	trainerbattle_single TRAINER_TAKAO, AzaleaTown_Gym_Text_TakaoIntro, AzaleaTown_Gym_Text_TakaoDefeat, AzaleaTown_Gym_EventScript_TakaoBrightenRoom
	msgbox AzaleaTown_Gym_Text_TakaoPostBattle, MSGBOX_AUTOCLOSE
	end

AzaleaTown_Gym_EventScript_TakaoBrightenRoom:: @ 81FC8D2
	call AzaleaTown_Gym_EventScript_BrightenRoom
	release
	end

AzaleaTown_Gym_EventScript_Jocelyn:: @ 81FC8D9
	trainerbattle_single TRAINER_JOCELYN, AzaleaTown_Gym_Text_JocelynIntro, AzaleaTown_Gym_Text_JocelynDefeat, AzaleaTown_Gym_EventScript_JocelynBrightenRoom
	msgbox AzaleaTown_Gym_Text_JocelynPostBattle, MSGBOX_AUTOCLOSE
	end

AzaleaTown_Gym_EventScript_JocelynBrightenRoom:: @ 81FC8F4
	call AzaleaTown_Gym_EventScript_BrightenRoom
	release
	end

AzaleaTown_Gym_EventScript_Laura:: @ 81FC8FB
	trainerbattle_single TRAINER_LAURA, AzaleaTown_Gym_Text_LauraIntro, AzaleaTown_Gym_Text_LauraDefeat, AzaleaTown_Gym_EventScript_LauraBrightenRoom
	msgbox AzaleaTown_Gym_Text_LauraPostBattle, MSGBOX_AUTOCLOSE
	end

AzaleaTown_Gym_EventScript_LauraBrightenRoom:: @ 81FC916
	call AzaleaTown_Gym_EventScript_BrightenRoom
	release
	end

AzaleaTown_Gym_EventScript_Brenden:: @ 81FC91D
	trainerbattle_single TRAINER_BRENDEN, AzaleaTown_Gym_Text_BrendenIntro, AzaleaTown_Gym_Text_BrendenDefeat, AzaleaTown_Gym_EventScript_BrendenBrightenRoom
	msgbox AzaleaTown_Gym_Text_BrendenPostBattle, MSGBOX_AUTOCLOSE
	end

AzaleaTown_Gym_EventScript_BrendenBrightenRoom:: @ 81FC938
	call AzaleaTown_Gym_EventScript_BrightenRoom
	release
	end

AzaleaTown_Gym_EventScript_Cristian:: @ 81FC93F
	trainerbattle_single TRAINER_CRISTIAN, AzaleaTown_Gym_Text_CristianIntro, AzaleaTown_Gym_Text_CristianDefeat, AzaleaTown_Gym_EventScript_CristianBrightenRoom
	msgbox AzaleaTown_Gym_Text_CristianPostBattle, MSGBOX_AUTOCLOSE
	end

AzaleaTown_Gym_EventScript_CristianBrightenRoom:: @ 81FC95A
	call AzaleaTown_Gym_EventScript_BrightenRoom
	release
	end

AzaleaTown_Gym_EventScript_Lilith:: @ 81FC961
	trainerbattle_single TRAINER_LILITH, AzaleaTown_Gym_Text_LilithIntro, AzaleaTown_Gym_Text_LilithDefeat, AzaleaTown_Gym_EventScript_LilithBrightenRoom
	msgbox AzaleaTown_Gym_Text_LilithPostBattle, MSGBOX_AUTOCLOSE
	end

AzaleaTown_Gym_EventScript_LilithBrightenRoom:: @ 81FC97C
	call AzaleaTown_Gym_EventScript_BrightenRoom
	release
	end

AzaleaTown_Gym_Text_TakaoIntro: @ 81FCB9F
	.string "Might is right!\n"
	.string "Come on!$"

AzaleaTown_Gym_Text_TakaoDefeat: @ 81FCBB8
	.string "Not enough power…$"

AzaleaTown_Gym_Text_TakaoPostBattle: @ 81FCBCA
	.string "Your skill overcame my strength!\n"
	.string "Your technique is commendable!$"

AzaleaTown_Gym_Text_JocelynIntro: @ 81FCC0A
	.string "There's no need for BRAWLY to be\n"
	.string "involved!\p"
	.string "I'll crush you!$"

AzaleaTown_Gym_Text_JocelynDefeat: @ 81FCC45
	.string "But… How?\n"
	.string "How could I lose so easily?$"

AzaleaTown_Gym_Text_JocelynPostBattle: @ 81FCC6B
	.string "I'm not going to waste this loss.\n"
	.string "I'll use it to motivate me to train!\p"
	.string "One day I'll become a GYM LEADER…\p"
	.string "No, I'll become the POKéMON LEAGUE\n"
	.string "CHAMPION!$"

AzaleaTown_Gym_Text_LauraIntro: @ 81FCD01
	.string "Don't you dare brush me off!\n"
	.string "It's not my fault if you cry!$"

AzaleaTown_Gym_Text_LauraDefeat: @ 81FCD3C
	.string "Waaaaaaah!\n"
	.string "I lost!$"

AzaleaTown_Gym_Text_LauraPostBattle: @ 81FCD4F
	.string "I battle in the dark to make my heart\n"
	.string "stronger.\p"
	.string "But because it's so dark, I can never\n"
	.string "see BRAWLY's face…$"

AzaleaTown_Gym_Text_LilithIntro: @ 81FCDB8
	.string "Ufufu…\n"
	.string "Are you stumbling around in the dark?$"

AzaleaTown_Gym_Text_LilithDefeat: @ 81FCDE5
	.string "Oh, you…\n"
	.string "I don't want to know you!$"

AzaleaTown_Gym_Text_LilithPostBattle: @ 81FCE08
	.string "You deserve to stay lost and end up\n"
	.string "back at the entrance again!$"

AzaleaTown_Gym_Text_BrendenIntro: @ 81FCE48
	.string "I'll show you the gumption of\n"
	.string "a sailing man!$"

AzaleaTown_Gym_Text_BrendenDefeat: @ 81FCE75
	.string "How'd this happen?\n"
	.string "It's not like me to lose this way!$"

AzaleaTown_Gym_Text_BrendenPostBattle: @ 81FCEAB
	.string "Oh, aye! You're worthy of seeing\n"
	.string "our GYM LEADER.$"

AzaleaTown_Gym_Text_CristianIntro: @ 81FCEDC
	.string "If you mean to pass, it has to be\n"
	.string "through me!$"

AzaleaTown_Gym_Text_CristianDefeat: @ 81FCF0A
	.string "Grrrrr!\n"
	.string "Vastly overpowered!$"

AzaleaTown_Gym_Text_CristianPostBattle: @ 81FCF26
	.string "You win!\n"
	.string "Go after that BADGE!$"

AzaleaTown_Gym_Text_BrawlyIntro: @ 81FCF44
	.string "I'm BRAWLY!\n"
	.string "DEWFORD's GYM LEADER!\p"
	.string "I've been churned in the rough waves\n"
	.string "of these parts, and I've grown tough\l"
	.string "in the pitch-black cave!\p"
	.string "So you wanted to challenge me?\n"
	.string "Let me see what you're made of!$"

AzaleaTown_Gym_Text_BrawlyDefeat: @ 81FD008
	.string "Whoah, wow! You made a much bigger\n"
	.string "splash than I expected!\p"
	.string "You swamped me!\p"
	.string "Okay, you've got me.\n"
	.string "Take this GYM BADGE!$"

AzaleaTown_Gym_Text_ReceivedKnuckleBadge: @ 81FD07D
	.string "{PLAYER} received the KNUCKLE BADGE\n"
	.string "from BRAWLY.$"

AzaleaTown_Gym_Text_KnuckleBadgeInfoTakeThis: @ 81FD0A8
	.string "The KNUCKLE BADGE makes all POKéMON\n"
	.string "up to Level 30, even those you get in\l"
	.string "trades, obey without question.\p"
	.string "And, you'll be able to use the HM move\n"
	.string "FLASH outside of battle.\p"
	.string "If you'd like, use this TECHNICAL\n"
	.string "MACHINE, too.$"

AzaleaTown_Gym_Text_ExplainBulkUp: @ 81FD181
	.string "That TM08 contains BULK UP.\p"
	.string "It's a move that raises both ATTACK\n"
	.string "and DEFENSE stats.\p"
	.string "… … … … … …$"

AzaleaTown_Gym_Text_RegisteredBrawly: @ 81FD1E0
	.string "Registered GYM LEADER BRAWLY\n"
	.string "in the POKéNAV.$"

AzaleaTown_Gym_Text_BrawlyPostBattle: @ 81FD20D
	.string "I can see your talent becoming a giant\n"
	.string "wave to cause a storm of astonishment\l"
	.string "among TRAINERS one day!$"

AzaleaTown_Gym_Text_GymStatue: @ 81FD272
	.string "DEWFORD TOWN POKéMON GYM$"

AzaleaTown_Gym_Text_GymStatueCertified: @ 81FD28B
	.string "DEWFORD TOWN POKéMON GYM\p"
	.string "BRAWLY'S CERTIFIED TRAINERS:\n"
	.string "{PLAYER}$"

AzaleaTown_Gym_Text_BrawlyPreRematch: @ 81FD2C4
	.string "BRAWLY: A wave may draw back, but it\n"
	.string "always returns to the shore.\p"
	.string "A giant wave of a talent like you…\n"
	.string "I knew you would return!\p"
	.string "Show me how much higher\n"
	.string "you've gone!$"

AzaleaTown_Gym_Text_BrawlyRematchDefeat: @ 81FD367
	.string "Wow!\n"
	.string "Swamped again!$"

AzaleaTown_Gym_Text_BrawlyPostRematch: @ 81FD37B
	.string "BRAWLY: Battling is vast and it's deep.\n"
	.string "You can't see the bottom.\l"
	.string "It's just like the sea of HOENN!$"

AzaleaTown_Gym_Text_BrawlyRematchNeedTwoMons: @ 81FD3DE
	.string "BRAWLY: A wave may draw back, but it\n"
	.string "always returns to the shore.\p"
	.string "A giant wave of a talent like you…\n"
	.string "I knew you would return!\p"
	.string "Oh? You only have one POKéMON\n"
	.string "that can battle.\p"
	.string "I'm sorry, but I'd like you to come back\n"
	.string "with at least two POKéMON.$"
`
